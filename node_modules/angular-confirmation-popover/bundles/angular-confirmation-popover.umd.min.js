!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("positioning"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","positioning","@angular/common"],n):n(t["angular-confirmation-popover"]={},t.ng.core,t.positioning,t.ng.common)}(this,function(t,n,e,o){"use strict";var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};var r=function(){return function(){this.confirmText="Confirm",this.cancelText="Cancel",this.confirmButtonType="success",this.cancelButtonType="default",this.placement="top",this.hideConfirmButton=!1,this.hideCancelButton=!1,this.popoverClass="",this.appendToBody=!1,this.reverseButtonOrder=!1}}(),p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return function(t,n){function e(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t),n}(r);p.decorators=[{type:n.Injectable}],p.ctorParameters=function(){return[]};var s=function(){function t(t){this.options=t}return t.prototype.ngAfterViewInit=function(){this.options.onAfterViewInit()},t}();s.decorators=[{type:n.Component,args:[{selector:"mwl-confirmation-popover-window",styles:["\n    .popover {\n      display: block;\n    }\n    .bs-popover-top .arrow, .bs-popover-bottom .arrow {\n      left: 50%;\n    }\n    .bs-popover-left .arrow, .bs-popover-right .arrow {\n      top: 50%;\n    }\n    .btn {\n      transition: none;\n    }\n    .confirm-btns {\n      display: flex;\n      justify-content: space-around;\n    }\n    .confirm-btn-container {\n      flex-basis: 50%;\n    }\n    .confirm-btn-container:not(:first-child) {\n      margin-left: 4px;\n    }\n    .confirm-btn-container:not(:last-child) {\n      margin-right: 4px;\n    }\n    .confirm-btns-reversed {\n      flex-direction: row-reverse;\n    }\n    .confirm-btns-reversed .confirm-btn-container:not(:first-child) {\n      margin-right: 4px;\n      margin-left: 0;\n    }\n    .confirm-btns-reversed .confirm-btn-container:not(:last-child) {\n      margin-right: 0;\n      margin-left: 4px;\n    }\n  "],template:'\n    <ng-template #defaultTemplate let-options="options">\n      <div [ngClass]="[\n        \'popover\',\n        options.placement,\n        \'popover-\' + options.placement,\n        \'bs-popover-\' + options.placement,\n        options.popoverClass\n      ]">\n        <div class="popover-arrow arrow"></div>\n        <h3 class="popover-title popover-header" [innerHTML]="options.popoverTitle"></h3>\n        <div class="popover-content popover-body">\n          <p [innerHTML]="options.popoverMessage"></p>\n          <div class="confirm-btns" [class.confirm-btns-reversed]="options.reverseButtonOrder">\n            <div\n              class="confirm-btn-container"\n              *ngIf="!options.hideCancelButton">\n              <button\n                type="button"\n                [mwlFocus]="options.focusButton === \'cancel\'"\n                [class]="\'btn btn-block btn-\' + options.cancelButtonType"\n                (click)="options.onCancel({clickEvent: $event})"\n                [innerHtml]="options.cancelText">\n              </button>\n            </div>\n            <div\n              class="confirm-btn-container"\n              *ngIf="!options.hideConfirmButton">\n              <button\n                type="button"\n                [mwlFocus]="options.focusButton === \'confirm\'"\n                [class]="\'btn btn-block btn-\' + options.confirmButtonType"\n                (click)="options.onConfirm({clickEvent: $event})"\n                [innerHtml]="options.confirmText">\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]="options.customTemplate || defaultTemplate"\n      [ngTemplateOutletContext]="{options: options}">\n    </ng-template>\n  '}]}],s.ctorParameters=function(){return[{type:p}]};var c=function(){function t(t,e,o,i,r,p){this.viewContainerRef=t,this.elm=e,this.defaultOptions=o,this.cfr=i,this.position=r,this.renderer=p,this.isDisabled=!1,this.isOpen=!1,this.isOpenChange=new n.EventEmitter(!0),this.confirm=new n.EventEmitter,this.cancel=new n.EventEmitter,this.eventListeners=[]}return t.prototype.ngOnInit=function(){this.isOpenChange.emit(!1)},t.prototype.ngOnChanges=function(t){t.isOpen&&(!0===t.isOpen.currentValue?this.showPopover():this.hidePopover())},t.prototype.ngOnDestroy=function(){this.hidePopover()},t.prototype.onConfirm=function(t){this.confirm.emit(t),this.hidePopover()},t.prototype.onCancel=function(t){this.cancel.emit(t),this.hidePopover()},t.prototype.togglePopover=function(){this.popover?this.hidePopover():this.showPopover()},t.prototype.onDocumentClick=function(t){!this.popover||this.elm.nativeElement.contains(t.target)||this.popover.location.nativeElement.contains(t.target)||this.hidePopover()},t.prototype.showPopover=function(){var t=this;if(!this.popover&&!this.isDisabled){setTimeout(function(){t.eventListeners=[t.renderer.listen("document","click",function(n){return t.onDocumentClick(n)}),t.renderer.listen("document","touchend",function(n){return t.onDocumentClick(n)}),t.renderer.listen("window","resize",function(){return t.positionPopover()})]});var e=new p;Object.assign(e,this.defaultOptions,{popoverTitle:this.popoverTitle,popoverMessage:this.popoverMessage,onConfirm:function(n){t.onConfirm(n)},onCancel:function(n){t.onCancel(n)},onAfterViewInit:function(){t.positionPopover()}});["confirmText","cancelText","placement","confirmButtonType","cancelButtonType","focusButton","hideConfirmButton","hideCancelButton","popoverClass","appendToBody","customTemplate","reverseButtonOrder"].forEach(function(n){"undefined"!=typeof t[n]&&(e[n]=t[n])});var o=this.cfr.resolveComponentFactory(s),i=n.Injector.create([{provide:p,useValue:e}],this.viewContainerRef.parentInjector);this.popover=this.viewContainerRef.createComponent(o,this.viewContainerRef.length,i),e.appendToBody&&document.body.appendChild(this.popover.location.nativeElement),this.isOpenChange.emit(!0)}},t.prototype.positionPopover=function(){if(this.popover){var t=this.popover.location.nativeElement.children[0],n=this.position.positionElements(this.elm.nativeElement,t,this.placement||this.defaultOptions.placement,this.appendToBody||this.defaultOptions.appendToBody);this.renderer.setStyle(t,"top",n.top+"px"),this.renderer.setStyle(t,"left",n.left+"px")}},t.prototype.hidePopover=function(){this.popover&&(this.popover.destroy(),delete this.popover,this.isOpenChange.emit(!1),this.eventListeners.forEach(function(t){return t()}),this.eventListeners=[])},t}();c.decorators=[{type:n.Directive,args:[{selector:"[mwlConfirmationPopover]"}]}],c.ctorParameters=function(){return[{type:n.ViewContainerRef},{type:n.ElementRef},{type:r},{type:n.ComponentFactoryResolver},{type:e.Positioning},{type:n.Renderer2}]},c.propDecorators={popoverTitle:[{type:n.Input}],popoverMessage:[{type:n.Input}],confirmText:[{type:n.Input}],cancelText:[{type:n.Input}],placement:[{type:n.Input}],confirmButtonType:[{type:n.Input}],cancelButtonType:[{type:n.Input}],focusButton:[{type:n.Input}],hideConfirmButton:[{type:n.Input}],hideCancelButton:[{type:n.Input}],isDisabled:[{type:n.Input}],isOpen:[{type:n.Input}],customTemplate:[{type:n.Input}],isOpenChange:[{type:n.Output}],confirm:[{type:n.Output}],cancel:[{type:n.Output}],popoverClass:[{type:n.Input}],appendToBody:[{type:n.Input}],reverseButtonOrder:[{type:n.Input}],togglePopover:[{type:n.HostListener,args:["click"]}]};var a=function(){function t(t){this.elm=t}return t.prototype.ngOnChanges=function(t){t.mwlFocus&&!0===this.mwlFocus&&this.elm.nativeElement.focus()},t}();a.decorators=[{type:n.Directive,args:[{selector:"[mwlFocus]"}]}],a.ctorParameters=function(){return[{type:n.ElementRef}]},a.propDecorators={mwlFocus:[{type:n.Input}]};var u=new n.InjectionToken("confirmation popover user options");function l(t){var n=new r;return Object.assign(n,t),n}var f=function(){function t(){}return t.forRoot=function(n){return void 0===n&&(n={}),{ngModule:t,providers:[{provide:u,useValue:n},{provide:r,useFactory:l,deps:[u]},e.Positioning]}},t}();f.decorators=[{type:n.NgModule,args:[{declarations:[c,s,a],imports:[o.CommonModule],exports:[c,a],entryComponents:[s]}]}],f.ctorParameters=function(){return[]},t.ConfirmationPopoverModule=f,t.ɵd=r,t.ɵf=p,t.ɵe=s,t.ɵc=c,t.ɵa=u,t.ɵb=l,t.ɵg=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-confirmation-popover.umd.min.js.map
